---
# Copyright 2017, Rackspace US, Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Any optioned required to make the mount point work. If no options are
#  provided the default will be used. This list is comma separted.
#  https://www.freedesktop.org/software/systemd/man/systemd.mount.html#Options=
systemd_default_mount_options: 'defaults'


# The `systemd_default_unit` option can be used on all mounts to start it once
#  all listed services are ready. This option is a case sensitive free from
#  disctionary containing list values. See the following link for all available
#  options: https://www.freedesktop.org/software/systemd/man/systemd.unit.html#%5BUnit%5D%20Section%20Options
# systemd_default_unit:
#   After:
#     - service.one
#     - service.two
#   ConditionPathExists:
#     - /var/path/exists1
#     - /var/path/exists2
systemd_default_unit: {}


# The systemd mounts dictionary is a set of mounts that will be created. The
#  dictionary can contain the following options:
#  `config_overrides` -- (optional) used to inject extra configuration options into the mount file.
#  `what` -- (required) Define what will be mounted. This can be a network target.
#  `where` -- (required) Where will the "WHAT" be mounted.
#  `type` -- (required) The type of file system that will be mounted.
#  `options` -- (optional) Any optioned required to make the mount point work.
#                          If no options are provided the default will be used.
#                          This list is comma separted. See
#                          `systemd_default_mount_options` for more details.
#  `unit` -- (optional) Dictionary of unit overrides commonly used in a mount.
#                       See `systemd_default_unit` for more details.
#  `state` -- (optional) system state of the mount point. The default will omit
#                        the state so that it is not started or stopped
#                        unessisarily. If it is desirable for this role to
#                        start/stop the mount immediately this can be done by
#                        setting the state to ["started", "stopped", "absent"].
#                        If the state is absent the mount will be stopped and
#                        unit file deleted.
#  `enabled` -- (optional) Set a Boolean to enable or disable the mount, the
#                          default is set to "true".

# systemd_mounts:
#   - what: '/var/lib/machines.raw'
#     where: '/var/lib/machines'
#     type: 'btrfs'
#     options: 'loop'
#     unit:
#       ConditionPathExists:
#         - '/var/lib/machines.raw'
#     state: 'started'
#     enabled: true
#   - config_overrides: {}
#     What: "10.1.10.1:/srv/nfs"
#     Where: "/var/lib/glance/images"
#     type: "nfs"
#     options: "_netdev,auto"
#     unit:
#       After:
#         - network.target
#   - what: "/openstack/swap.img"
#     priority: "0"
#     options: "%%"
#     type: "swap"
#     state: 'started'
#     enabled: true
systemd_mounts: {}
